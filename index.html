<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nova Shop</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>Nova Shop</h1>
  <div class="cart-btn" onclick="toggleCart()">Cart ðŸ›’</div>
</header>

<main class="products">

  <div class="product"
       data-name="Cool Sticker"
       data-price="10"
       data-image="images/sticker.jpg">
    <img src="images/sticker.jpg" alt="Cool Sticker">
    <h2>Cool Sticker</h2>
    <p>$10</p>
    <button class="btn add" onclick="addToCart(this)">Add to Cart</button>
  </div>

  <div class="product"
       data-name="Phone Grip"
       data-price="15"
       data-image="images/grip.jpg">
    <img src="images/grip.jpg" alt="Phone Grip">
    <h2>Phone Grip</h2>
    <p>$15</p>
    <button class="btn add" onclick="addToCart(this)">Add to Cart</button>
  </div>

</main>

<!-- CART MODAL -->
<div class="cart-modal" id="cartModal">
  <div class="cart-content">
    <h2>Your Cart</h2>
    <div id="cartItems"></div>

    <div class="total-line">
      Total: $<span id="cartTotal">0.00</span>
    </div>

    <div class="pay-options">
      <a class="paypal">Pay via PayPal (Coming Soon)</a>
      <a class="zelle">Pay via Zelle: 805-364-1112</a>
      <a href="#" onclick="payWithAppleCash()" class="applecash">
        Pay with Apple Cash
      </a>
      <a href="https://venmo.com/santinlz" target="_blank" class="venmo">
        Pay via Venmo: @santinlz
      </a>
    </div>

    <button class="close-btn" onclick="toggleCart()">Close</button>
  </div>
</div>

<script>
let cart = [];

function addToCart(button){
  const product = button.closest(".product");
  const name = product.dataset.name;
  const price = parseFloat(product.dataset.price);
  const image = product.dataset.image;

  cart.push({ name, price, image });
  updateCart();
}

function toggleCart(){
  const modal = document.getElementById("cartModal");
  modal.style.display =
    modal.style.display === "flex" ? "none" : "flex";
}

function updateCart(){
  const container = document.getElementById("cartItems");
  const totalDisplay = document.getElementById("cartTotal");

  container.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    total += item.price;

    container.innerHTML += `
      <div class="cart-item">
        <img src="${item.image}">
        <div class="cart-info">
          ${item.name} - $${item.price}
        </div>
      </div>
    `;
  });

  totalDisplay.textContent = total.toFixed(2);
}

function payWithAppleCash(){
  if(cart.length === 0){
    alert("Your cart is empty.");
    return;
  }

  let total = 0;
  let itemsText = "";

  cart.forEach(item => {
    total += item.price;
    itemsText += `${item.name} ($${item.price}), `;
  });

  itemsText = itemsText.slice(0, -2);

  const message =
    `Hi! I'd like to pay with Apple Cash.\n` +
    `Items: ${itemsText}\n` +
    `Total: $${total.toFixed(2)}`;

  const phoneNumber = "8053641112";
  const smsURL =
    `sms:${phoneNumber}?&body=${encodeURIComponent(message)}`;

  window.location.href = smsURL;
}
</script>

</body>
</html>
